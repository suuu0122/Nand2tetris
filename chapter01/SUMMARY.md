# Chapter01-ブール論理

## ブール代数
* ブール代数は、ブール値（「バイナリ値」や「2値」とも呼ばれる）を扱う.
* ブール値には、true/false、1/0、On/Off、などが使用される.
* ブール関数は、入力としてブール値を受け取り、出力としてブール値を返す関数である.
* ブール関数は、ハードウェアアーキテクチャの設計仕様や製造、最適化などにおいて中心的な役割を担う.
<br />

## 真理値表による表現
* ブール関数を表現する最も単純な方法は、関数の入力について、すべての可能な組み合わせを列挙し、入力の各組み合わせに対する関数の出力をひとつずつ埋めていくこと.	
	| x | y | z | f(x,y,z) |
	| - | - | - | -------- |
	| 0 | 0 | 0 | 0		   |
	| 0 | 0 | 1 | 0        |
	| 0 | 1 | 0 | 1        |
	| 0 | 1 | 1 | 0        |
	| 1 | 0 | 0 | 1        |
	| 1 | 0 | 1 | 0        |
	| 1 | 1 | 0 | 1        |
	| 1 | 1 | 1 | 0        |
<br />

## ブール式
* 真理値表の他に、ブール関数はブール式（boolean expression）によって記述することもできる.
* ブール式の基本は、AND、OR、NOT、の3つである.
* 「x AND y」は、xとyが両方1の時のみ1になる.
* 「x OR y」は、xまたはyの一方が1の時に1になる.
* 「NOT x」は、xが0の時に1になる.
* x • y = x AND y
* x + y = x OR y
* x^-（xバー） = NOT x
<br />

## 正準表現
* どのようなブール代数でも、少なくともひとつの正準表現（canonical representation）と呼ばれるブール式で表すことができる.
* 真理値表から正準表現を導くには、真理値表で関数の出力が1である行だけに注目する. その各行について、その行に入力されるリテラル（変数またはその変数の否定）をANDで結合して新たな項を作成する. これらの項をすべてORで結合することで、真理値表と等しいブール式が得られる.
* 上記の真理値表でブール式を考えると、「f(x,y,z) = x^-yz^- + xy^-z^- + xyz^-」となる.
* どのようなブール関数であれ、3つのブール演算AND、OR、NOT、を用いて表現できる.
<br />

## ブール関数
* AND、OR、NOTは、それぞれNAND（またはNOR）だけから作成でき、すべてのブール関数はAND、OR、NOTの操作によって作成することができるので、すべてのブール関数はNANDだけから作成できる.
* NANDを実現した物理デバイスが自由に使用できるのであれば、どのようなブール関数でも、NANDをつなぎ合わせてハードウェアとして作成できる.
<br />

## 論理ゲート
* すべてのデジタル機器は、情報の保存と処理を行うために設計された回路からできている.
* そのような回路は、**論理ゲート（logic gate）** から構成される.
* [論理ゲート](http://www.ee.t-kougei.ac.jp/tuushin/lecture/lcircuit/gate/index.html)は、論理演算を行うための電子回路であり、その動作は論理式や真理値表で表すことができる.
* NOT、AND、ORゲートは、基本論理ゲートと呼ばれ、これら3種類のゲートを用いることで、任意の論理関数を構成できる. 本書では、NANDから始め、その他すべての論理回路をNANDから作成する（**Nand**2tetris）.
* ゲート（gate）は、ブール関数を実装するための物理デバイスである.
* 例えば、n個の変数を入力として受け取り、m個のバイナリを返すブール関数fがあった場合（上記までの例ではすべてmは1であった）、fを実装するゲートはn個の入力ピンとm個の出力ピンを持つことになる.
* 最も単純なゲートは、あるスイッチ素子を特定の配線経路（ゲートの機能が実現するように設計されている構造）でつなぎ合わせることで作られる. このスイッチ素子は、**トランジスタ（transistor）** と呼ばれる.
* 現代のデジタルコンピュータは、2値データの表現と伝達（ゲートからゲートへの伝達）を行うために電気を用いている. 過去50年間、電気を用いる他に磁石、[光](https://ja.wikipedia.org/wiki/%E5%85%89%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0)、バイオ、水圧、空気圧などのメカニズムが使用されることもあった. 現在では、量子を利用した[量子コンピュータ](https://ja.wikipedia.org/wiki/%E9%87%8F%E5%AD%90%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF)も研究されている.
* 今日において、ほとんどのゲートがシリコンから作られたトランジスタにより実現されており、そのようなゲートは **回路（またはチップ）** としてパッケージされている.
* ブール代数は、いかなる技術を使用したとしても、その振る舞いを抽象化して表すことができるので、コンピュータ科学者は、電気、回路、スイッチ、リレー装置、電源といった物理的な要素については基本的に考える必要がない.<br>
-> コンピュータ科学者は、ブール代数と論理ゲートの抽象化された世界に集中することができる.
<br />

## 複合ゲート
* 複合ゲートは、基本ゲートをつなぎ合わせて、より複雑な機能を持つゲートのこと.
* 論理設計は、ゲートのつなぎ方に関する技法であり、それによって複雑な機能を持つ複合ゲートを構成することができる. 例えば、3つの入力ピンを持つANDゲートも2つのANDをつなぎ合わせることで実装できる.
* 論理設計は、ゲートの数を可能な限り減らすために、すでに実装済みの他のゲートを用いて、与えられたゲートの仕様を満たすように実装するのが良いとされる.
<br />

## ハードウェア記述言語（HDL）
* 今日ハードウェア設計者は、コンピュータ上で **ハードウェア記述言語（Hardware Description Language）を用いて、回路のアーキテクチャを設計し、最適化について考えることができる.
* HDLは、VHDL（VはVirtualを意味する）としても知られている.
* 設計者は、回路の構造をHDLプログラムで表現し、その後でテストを行う. テストは、コンピュータのシミュレータ上で行われ、**ハードウェアシミュレータ** と呼ばれるソフトウェアツールを使用する.
* ハードウェアシミュレータは、HDLで書かれたプログラムを入力として読み込み、メモリ上にそのプログラムで指定された回路を構成する. シミュレータでテストを行う場合は、その仮想回路へさまざまな入力が与えられ、回路の出力をシミュレートし、その出力が期待される結果と一致するか比較される.
* ハードウェア設計者は、回路の正確性に加えて、処理速度、エネルギー消費量、回路設計全体のコストなどについても注意を払う.
<br />

## NAND・NOT・AND・OR
* NAND
	| A | B | OUT |
	| - | - | --- |
	| 0 | 0 | 1   |
	| 0 | 1 | 1   |
	| 1 | 0 | 1   |
	| 1 | 1 | 0   |
* NOT
	| IN | OUT |
	| -- | --- |
	| 0  | 1   |
	| 1  | 0   |
* AND
	| A | B | OUT |
	| - | - | --- |
	| 0 | 0 | 0   |
	| 0 | 1 | 0   |
	| 1 | 0 | 0   |
	| 1 | 1 | 1   |
	* NOT(NAND(A, B))
* OR
	| A | B | OUT |
	| - | - | --- |
	| 0 | 0 | 0   |
	| 0 | 1 | 1   |
	| 1 | 0 | 1   |
	| 1 | 1 | 1   |
	* NAND(NOT(A), NOT(B))
	* [ORをNANDで構成](http://www.setsunan.ac.jp/~shikama/LogicCircuits2009/2017LCB_10.pdf)
<br />

## 実装リファレンス
* [NANDゲートだけでNOT、AND、OR、NOR、XORを構成する](https://nitomath.hatenablog.jp/entry/2020/08/13/215947)
* [セキュリティ・キャンプ キャンパー育成枠の活動録](https://genkai-io.hatenablog.jp/entry/2018/11/09/150754)
* [コンピュータシステムの理論と実装の1〜5章のハードウェアを実装しました（ネタバレ注意）](https://nihemak.hatenablog.com/entry/2019/04/28/150541#Not)
